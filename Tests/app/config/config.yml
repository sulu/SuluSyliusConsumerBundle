# Doctrine Configuration
doctrine:
    dbal:
        host: 127.0.0.1
        dbname: "su_sylius_test"
    orm:
        mappings:
            gedmo_tree:
                type: xml
                prefix: Gedmo\Tree\Entity
                dir: '%kernel.root_dir%/../../vendor/gedmo/doctrine-extensions/lib/Gedmo/Tree/Entity'
                alias: GedmoTree
                is_bundle: false

framework:
    messenger:
        buses:
            command_bus:
                middleware:
                    - doctrine_transaction_middleware

services:
    sulu_sylius_consumer_test.messenger.bus.default:
        alias: message_bus
        public: true
    doctrine.orm.messenger.middleware_factory.transaction:
        class: Symfony\Bridge\Doctrine\Messenger\DoctrineTransactionMiddlewareFactory
        arguments: ['@doctrine']
    messenger.middleware.doctrine_transaction_middleware:
        class: Symfony\Bridge\Doctrine\Messenger\DoctrineTransactionMiddleware
        factory: 'doctrine.orm.messenger.middleware_factory.transaction:createMiddleware'
        abstract: true
        arguments: ['default']
